<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>资源</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/weadmin.css">
    <style>
        .tt{
            width:260px;
            height:180px;
            text-align:center;
            background-color: #e6e6e6;
            display: table-cell;
            vertical-align:middle;
            cursor: pointer;
        }

        .content-list{
            float: left;
            padding: 10px;

        }


    </style>
</head>
<body class="childrenBody">
<div >
    <div class="" id="parentFunction" style="width: 100%">
    </div>
    </div>
</div>
<script src="/lib/layui/layui.js" charset="utf-8"></script>
<script type="text/javascript">
    layui.use(['flow','form', 'table', 'layer','upload'],  function(){
        var flow = layui.flow,
        form = layui.form,
        upload = layui.upload,
        layer = parent.layer === undefined ? layui.layer : top.layer,
        $ = layui.jquery, table = layui.table;

        $.post("/businesse/content/getList",function(res){
            if(res.code=='0'){
                $("#parentFunction").empty();
                res.data.forEach(function(v,index){
                    var parent=' <fieldset  class="layui-elem-field layui-field-title" style="margin-top: 30px;">\n' +
                        '            <legend>'+v.name+'</legend>' +
                        '        </fieldset>' +
                        '        <div class="layui-row layui-col-space1" id="childFunction'+index+'">' +
                        '        </div>';

                    $("#parentFunction").append(parent);
                    v.childFuntion.forEach(function(vv){
                        var child ='<div class="content-list">\n' +
                            '                <div  onclick="goDetail(\''+vv.id+'\')">\n' +
                            '                    <div class="tt">'+vv.name+'</div>\n' +
                            '                </div>\n' +
                            '            </div>';

                        $("#childFunction"+index+"").append(child);
                    });

                });
            }

        });

        //按屏加载图片
        flow.lazyimg({
            elem: '#parentFunction img'
            ,scrollElem: '#parentFunction' //一般不用设置，此处只是演示需要。
        });

        window.goDetail=function(id){
            window.location.href="/businesse/content/contentDetail?id="+id;
        };

    });

</script>
</body>
</html>